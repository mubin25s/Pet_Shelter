<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Pets - Paws Shelter</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">üêæ Paws Admin</div>
                <div class="nav-links">
                    <a href="admin_dashboard.html">Dashboard</a>
                    <a href="admin_adoptions.html">Adoptions</a>
                    <a href="#" onclick="logout()">Logout</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <h1>Manage Pets</h1>
        <div class="card">
            <table>
                <thead>
                    <tr>
                        <th>ID</th><th>Name</th><th>Type</th><th>Status</th><th>Health</th><th>Action</th>
                    </tr>
                </thead>
                <tbody id="pet-table"></tbody>
            </table>
        </div>
    </div>
    <script src="js/app.js"></script>
    <script>
        checkSession().then(res => { if (!res.loggedIn || res.user.role !== 'admin') window.location.href = 'login.html'; });

        async function loadPets() {
            const pets = await apiCall('pets.php');
            const tbody = document.getElementById('pet-table');
            tbody.innerHTML = '';
            pets.forEach(pet => {
                tbody.innerHTML += `
                <tr>
                    <td>${pet.id}</td>
                    <td>${pet.name}</td>
                    <td>${pet.type}</td>
                    <td>${pet.status}</td>
                    <td>${pet.health_status}</td>
                    <td>
                        <button onclick="deletePet(${pet.id})" class="btn" style="background:red; color:white; padding:5px 10px;">Delete</button>
                    </td>
                </tr>`;
            });
        }
        
        async function deletePet(id) {
            if(confirm('Are you sure?')) {
                await apiCall('pets.php?id=' + id, 'DELETE');
                loadPets();
            }
        }
        
        loadPets();
    </script>
</body>
</html>
